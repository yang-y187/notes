问题梳理

自我介绍不熟悉，一直啊啊啊，不要一直说一定一定

- 离职的原因
  - 上班地点不合适，女朋友在海淀上班，我在亦庄
  - 收入和付出不成正比
- 到岗需要多久
  - 十天半个月就可
- ArrayList和LinkedList的区别
- 添加和删除操作比较频繁的时候选择哪个list   
  - 添加和删除都比较频繁的情况下，选择LinkedList
- 线程异步的方式
- runable和callback异步方式的区别
- 为什么线程Thread可以通过继承的方式执行，为什么还需要存在实现runable接口实现类的方式呢
  - 没答好，真正答案是
    - Java是单继承，一个类只能继承一个父类，限制了代码的灵活，而实现runable接口没有这个限制
    - 实现runable接口可以将线程逻辑和线程对象分离，使代码更加容易复用
    - 线程池只支持runable task任务
- 现成start方法和run方法
- 线程执行run方法时，是什么状态
- 线程的状态有哪几种 
  - 新建、就绪、阻塞、等待、超时等待、终止
- 线程执行sleep会进入哪种状态
- 线程安全问题是什么问题
- 怎么解决线程安全问题
- syn和volatile的区别
- 有什么实际使用场景
  - 招商系统 取类目信息
- jvm内存区域有哪些
- 什么情况下使用直接内存
  - NIO和零拷贝会用到
- 方法区和直接内存不是两个东西吗，为什么方法区放在直接内存中
- 说一下零拷贝
- 直接内存怎么释放内存呢 ?
- 堆内存怎么回收
  - 回收算法
  - 标记的算法
- mysql中的脏读和幻读的区别
- 最佳左前缀讲一下
- 将查询三列数据 a，b，c，输出的接口合成1列
- 哨兵节点和分片集群的区别
- 计算机网络中 TCP/IP 模型分为哪几层
- 网络层常见的协议有哪些
- IP协议是哪一层的
- http和https协议的区别
- 非对称加密有性能损耗，有什么优化措施吗
- 中间人劫持怎么解决
- 项目-合同拆分片
  - 一千万数据的单表为什么要进行拆分片呢？
    - 因为门店每年都需要续签合同，门店续签合同会导致合同表的数据量在短时间内激增几百万条，这是一个潜在的风险，不能在极大影响性能的情况下再进行拆分，单分片的性能瓶颈只会越来越明显
    - 多分片提高了系统的可用性
  - 讲一下怎么拆分片的，是否有数据倾斜的问题？
    - 一个分片，290多万，300多万，最多不超过310万
  - 拆分片后，查询怎么处理呢？
- 讲一下 业务监控异常的背景以及怎么设计的
  - 背景：实时发现业务异常的情况、数据库与ES、redis数据不一致的情况、在长时间处于一个状态的监控
  - 实现：接binlog日志的消息，反查数据库，进行校验，判断是否有异常、es、redis不一致等，
    - 怎么接binlog消息的呢？
      - 京东有数据订阅的中间件，阿里也有类似的canal，模拟为数据库的从节点，收到数据变更的消息，则同步订阅方，我们应用订阅了商家、门店、费用、合同表数据
      - 收到数据变更的消息后，再执行先进行逻辑判断，转发到不同的消息队列 （状态停留、数据一致性、业务异常是不同的消息队列，我们需要把它抽离出来）
      - 另外，京东的binlog消息处理如果有异常，会进行阻塞，导致后续所有的消息都无法消费，因此不要在该处做任何业务的处理
      - 
    - 每一种问题都需要添加一段代码来判断吗，这会不会做很复杂，工作量很大
      - 使用了模版模式的设计模式，抽出一个抽象类，将整体的流程写出来，商家、门店、费用等，只需要实现具体的对比方法即可
    - 两千条问题，是发现了两千种问题吗？
      - 不是，是两千条数据有异常，但是不会有重复发送的问题，因为我们有做版本控制
- 项目-ddd 领域驱动设计，讲一讲具体怎么落地的，可以举一个示例
  - 
  - 如何划分领域的？
    - 领域驱动设计（Domain-Driven Design，DDD）是一种软件开发方法论，旨在通过将系统的核心逻辑与业务领域紧密结合，构建出高内聚、低耦合的软件系统。
- 7000万条数据备案迁移 是怎么做的
  - 描述背景：
  - 操作：
  - 问题：开始双写，读新库有问题吧
  - 怎么确定哪些数据是要迁移到归档库呢？
    - 根据业务场景来的
  - 旧表迁移到新表，怎么迁移的呢？
    - 分页查询一条条迁移的，为了避免深度分页，使用了滚动查询
    - 



同花顺

- 主要是做B端业务吗
- 领域驱动介绍下
- 领域驱动 如何分层
- 遇到过OOM的问题吗？ 怎么排查的
- 领域驱动 如何和其他系统交互
- 领域驱动的系统，做了怎样的优化 
  - 系统优化
  - 性能优化
- 合同迁移的过程中，遇到过什么问题吗
- JVM的安全点
- 操作系统中 虚拟内存是干嘛用的
- N对夫妻，2N个位子，有多少种排位方式
- 给你一笔钱x,再给 10支股票，30天，计算出最大收益，假设买入卖出没有成本
- 给一个数字，输出质数的乘积



牵手

- 





**新东方**

- 如果单机器对Controller中某个方法的调用次数进行统计，用哪种Java数据类型
  - 用CurrentHashMap，key是方法，Value 是什么类型：**`AtomicInteger`** 说成AtomicLong了，没有这个类型，或者用LongAddr
  - 不使用map，使用volatile Long 可以吗？
    - 不行，volatile 只保证了单线程的指令重排无异常，不能保证多线程的指令重排
  - AtomicInteger 是如何保证原子性的呢？
    - 使用CAS实现的
- CurrentHashMap1.7  1.8的区别
  - 1.7 是底层结构是 segment数组 + HashEntry数据+链表，segment数据继承了rententLock锁，segment数组创建好后不能再改变，默认是16，HashEntry默认是2，可以扩容
  - 1.8 底层结构是Node数组+链表/红黑树的结构，使用的锁是  syncronized+cas的方式，Node对应一把锁，方便扩容，且懒加载
- CurrentHashMap 1.7 从rententlock 切换到syncronized
- 锁升级，如何升级
- **AQS中的队列是无界的队列，为什么是无界的呢？**
- **如何发现OOM 以及排查定位OOM的问题**
  - 
- **双向链表，某个节点的指针在瞎指，如何发现？**
- 分布式机器，统计某个方法的访问次数，怎么实现？
  - 存redis，存String类型就可
  - 不考虑并发的问题，如何统计访问量前三的接口呢？
    - 用Zset
- Zset 底层数据结构是有两种实现方式吧，怎么实现的？
  - 数据量少于128条，元素大小小于64字节，使用压缩列表，否则使用 跳表+Hash的结构
- 跳表 [2,4,6,8,10]，插入数据5，怎么插入？
  - 跳表是双向链表，需要移动哪个指针
- Mybatis是如何避免sql注入的？
- 讲一下Mybatis的执行流程？
  - 略过了很多东西
- **不同的mapper中，都有getById的方法，可以存在吗，为什么**
- @autowired 讲一下 
- 数据库的默认事务隔离界别是什么？
- @Transactional 讲一下
- **@Transactional 修饰了方法a,a内部调用了方法b，执行完b代码后执行后续逻辑异常了，方法b会回滚吗**
  - 说错了
- union 和union all的区别 
  - 没打出来
- 写一个复杂sql 
  - 没写出来
- 10亿条数据的联合索引树，有几层？
- 数据库有哪些事务隔离级别
- **数据库默认的事务隔离级别是**