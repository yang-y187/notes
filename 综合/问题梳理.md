问题梳理

# 202503

自我介绍不熟悉，一直啊啊啊，不要一直说一定一定

- 离职的原因
  - 上班地点不合适，女朋友在海淀上班，我在亦庄
  - 收入和付出不成正比
- 到岗需要多久
  - 十天半个月就可
- ArrayList和LinkedList的区别
- 添加和删除操作比较频繁的时候选择哪个list   
  - 添加和删除都比较频繁的情况下，选择LinkedList
- 线程异步的方式
- runable和callback异步方式的区别
- 为什么线程Thread可以通过继承的方式执行，为什么还需要存在实现runable接口实现类的方式呢
  - 没答好，真正答案是
    - Java是单继承，一个类只能继承一个父类，限制了代码的灵活，而实现runable接口没有这个限制
    - 实现runable接口可以将线程逻辑和线程对象分离，使代码更加容易复用
    - 线程池只支持runable task任务
- 现成start方法和run方法
- 线程执行run方法时，是什么状态
- 线程的状态有哪几种 
  - 新建、就绪、阻塞、等待、超时等待、终止
- 线程执行sleep会进入哪种状态
- 线程安全问题是什么问题
- 怎么解决线程安全问题
- syn和volatile的区别
- 有什么实际使用场景
  - 招商系统 取类目信息
- jvm内存区域有哪些
- 什么情况下使用直接内存
  - NIO和零拷贝会用到
- 方法区和直接内存不是两个东西吗，为什么方法区放在直接内存中
- 说一下零拷贝
- 直接内存怎么释放内存呢 ?
- 堆内存怎么回收
  - 回收算法
  - 标记的算法
- mysql中的脏读和幻读的区别
- 最佳左前缀讲一下
- 将查询三列数据 a，b，c，输出的接口合成1列
- 哨兵节点和分片集群的区别
- 计算机网络中 TCP/IP 模型分为哪几层
- 网络层常见的协议有哪些
- IP协议是哪一层的
- http和https协议的区别
- 非对称加密有性能损耗，有什么优化措施吗
- 中间人劫持怎么解决
- 项目-合同拆分片
  - 一千万数据的单表为什么要进行拆分片呢？
    - 因为门店每年都需要续签合同，门店续签合同会导致合同表的数据量在短时间内激增几百万条，这是一个潜在的风险，不能在极大影响性能的情况下再进行拆分，单分片的性能瓶颈只会越来越明显
    - 多分片提高了系统的可用性
  - 讲一下怎么拆分片的，是否有数据倾斜的问题？
    - 一个分片，290多万，300多万，最多不超过310万
  - 拆分片后，查询怎么处理呢？
- 讲一下 业务监控异常的背景以及怎么设计的
  - 背景：实时发现业务异常的情况、数据库与ES、redis数据不一致的情况、在长时间处于一个状态的监控
  - 实现：接binlog日志的消息，反查数据库，进行校验，判断是否有异常、es、redis不一致等，
    - 怎么接binlog消息的呢？
      - 京东有数据订阅的中间件，阿里也有类似的canal，模拟为数据库的从节点，收到数据变更的消息，则同步订阅方，我们应用订阅了商家、门店、费用、合同表数据
      - 收到数据变更的消息后，再执行先进行逻辑判断，转发到不同的消息队列 （状态停留、数据一致性、业务异常是不同的消息队列，我们需要把它抽离出来）
      - 另外，京东的binlog消息处理如果有异常，会进行阻塞，导致后续所有的消息都无法消费，因此不要在该处做任何业务的处理
      - 
    - 每一种问题都需要添加一段代码来判断吗，这会不会做很复杂，工作量很大
      - 使用了模版模式的设计模式，抽出一个抽象类，将整体的流程写出来，商家、门店、费用等，只需要实现具体的对比方法即可
    - 两千条问题，是发现了两千种问题吗？
      - 不是，是两千条数据有异常，但是不会有重复发送的问题，因为我们有做版本控制
- 项目-ddd 领域驱动设计，讲一讲具体怎么落地的，可以举一个示例
  - 如何划分领域的？
    - 领域驱动设计（Domain-Driven Design，DDD）是一种软件开发方法论，旨在通过将系统的核心逻辑与业务领域紧密结合，构建出高内聚、低耦合的软件系统。
- 7000万条数据备案迁移 是怎么做的
  - 描述背景：
  - 操作：
  - 问题：开始双写，读新库有问题吧
  - 怎么确定哪些数据是要迁移到归档库呢？
    - 根据业务场景来的
  - 旧表迁移到新表，怎么迁移的呢？
    - 分页查询一条条迁移的，为了避免深度分页，使用了滚动查询
    - 



同花顺

- 主要是做B端业务吗
- 领域驱动介绍下
- 领域驱动 如何分层
- 遇到过OOM的问题吗？ 怎么排查的
- 领域驱动 如何和其他系统交互
- 领域驱动的系统，做了怎样的优化 
  - 系统优化
  - 性能优化
- 合同迁移的过程中，遇到过什么问题吗
- JVM的安全点
- 操作系统中 虚拟内存是干嘛用的
- N对夫妻，2N个位子，有多少种排位方式
- 给你一笔钱x,再给 10支股票，30天，计算出最大收益，假设买入卖出没有成本
- 给一个数字，输出质数的乘积



牵手

- 





**新东方**

- 如果单机器对Controller中某个方法的调用次数进行统计，用哪种Java数据类型
  - 用CurrentHashMap，key是方法，Value 是什么类型：**`AtomicInteger`** 说成AtomicLong了，没有这个类型，或者用LongAddr
  - 不使用map，使用volatile Long 可以吗？
    - 不行，volatile 只保证了单线程的指令重排无异常，不能保证多线程的指令重排
  - AtomicInteger 是如何保证原子性的呢？
    - 使用CAS实现的
- CurrentHashMap1.7  1.8的区别
  - 1.7 是底层结构是 segment数组 + HashEntry数据+链表，segment数据继承了rententLock锁，segment数组创建好后不能再改变，默认是16，HashEntry默认是2，可以扩容
  - 1.8 底层结构是Node数组+链表/红黑树的结构，使用的锁是  syncronized+cas的方式，Node对应一把锁，方便扩容，且懒加载
- CurrentHashMap 1.7 从rententlock 切换到syncronized
- 锁升级，如何升级
- **AQS中的队列是无界的队列，为什么是无界的呢？**
- **如何发现OOM 以及排查定位OOM的问题**
  - 
- **双向链表，某个节点的指针在瞎指，如何发现？**
- 分布式机器，统计某个方法的访问次数，怎么实现？
  - 存redis，存String类型就可
  - 不考虑并发的问题，如何统计访问量前三的接口呢？
    - 用Zset
- Zset 底层数据结构是有两种实现方式吧，怎么实现的？
  - 数据量少于128条，元素大小小于64字节，使用压缩列表，否则使用 跳表+Hash的结构
- 跳表 [2,4,6,8,10]，插入数据5，怎么插入？
  - 跳表是双向链表，需要移动哪个指针
- Mybatis是如何避免sql注入的？
- 讲一下Mybatis的执行流程？
  - 略过了很多东西
- **不同的mapper中，都有getById的方法，可以存在吗，为什么**
  - 可以，因为mybatis扫描时，取xml的namespace+id 作为key，区分不同的方法

- @autowired 讲一下 
- 数据库的默认事务隔离界别是什么？
- @Transactional 讲一下
- **@Transactional 修饰了方法a,a内部调用了方法b，执行完b代码后执行后续逻辑异常了，方法b会回滚吗**
  - 说错了
- union 和union all的区别 
  - 没打出来
- 写一个复杂sql 
  - 没写出来
- 10亿条数据的联合索引树，有几层？
- 数据库有哪些事务隔离级别
- **数据库默认的事务隔离级别是**





快手

- B用户是什么概念，用户主体是哪些
- 为什么要对合同表进行拆分片？
- 某个用户的不同合同组是可能写在不同的分片上的，这你们是怎么解决的？
  - 数据库增加索引、分页复杂查询 查ES
- 怎么保证 ES和数据库中的数据是一致的？
  - 业务监控系统保证我们的一致性
- 业务监控系统 监控的是啥呢？
- 接binlog 消息同步ES和自己发MQ同步ES 的区别是什么，是怎么考虑的？
  - 实时发消
    - 灵活度高，可以在业务逻辑中控制何时发送消息
    - 侵入到业务代码，增加了业务的复杂度
    - 我们消息自产自销，性能高
  - binlog消息
    - 解耦性好
    - 接从库的binlog消息，增加了数据的延迟
- 接binlog消息有延迟，用ES不能忍受这种延迟吗，是有其他的考虑吗？
- 怎么保证 ES 和数据库的一致性的？
  - 发MQ是无序的，怎么保证是先更新A，后更新成B，而不是先更新成B后变成A
- 假设 发现有业务不一致的情况，后续步骤是啥？
- java线程池了解过吗？你认为线程池需要手动的关闭吗？
  - 
- 线程池怎么关闭呢？
- showdownNow 是怎么关闭线程的
- interrupt 一定会停止线程吗？
- 有其他可以粗暴停止线程的方式吗？
  - 没答出来
- redis快在哪？
- redis既然是单线程，为什么既能存储数据，又能设置过期时间清除数据的呢？
- redis 分布式锁 加锁解锁流程是什么?
- 实际应用是怎么判断锁的，分布式锁的锁重试是什么实现的？
- 发起一个RPC调用流程
- 调用方怎么刷新发布者的IP信息呢？
  - 这就开始瞎说了，实际有多种方式
    1. 定期向服务注册中心拉取发布者的IP信息
    2. 监听发布者的变更，有变更会主动拉取
    3. 注册变更后会通知调用方，调用方再拉取刷新
  - 需要说引发布者的包，通过反射创建该对象
- 序列化方式是哪提供的，包里面会提供序列化方式？
- 多个RPC调用，如何区分线程A的调用与结果A对应呢，而不是结果B的
  - 请求时携带请求Id
- 大数相乘







白龙马

- 合同表拆分片是怎么做的？

- 用户要查合同信息怎么办呢？

- 分布式ID是怎么生成的？

- 对业务监控系统，系统梳理总结一下，描述的太细致，太零碎了，分门别类的有些问题、有哪些手段、取得哪些结果

- 业务监控系统是什么系统？技术无异常，但业务异常的监控系统

- 在京东贡献、或者经历对自己印象最深、或者成长最大的

- 对数据库 索引 的理解，有哪些使用上的经验吗

- 一次查询可以用到多个索引，mysql查询的过程？

- 单表查询可以命中多个索引吗？

  - 条件 a=x, b=x   ，有a索引和b索引，index merge 

- 联合查询。范围查询有什么影响吗

- explan 中 key_lens 什么含义 命中索引的字段长度 

- explan 用到哪些字段

  - possible_keys、key、Extra 用的比较多

- Extra 哪些字段解释下

- using index 和 using index condition 含义

- 还有哪些没体现你的技术深度？

  - 叶子节点的内部

- B+树写入过程是怎么样的

- 有20g的文件内容，需要排序，只有一台8g的电脑 怎么排序

  - 将数据分为10个文件，然后读取每个数据的第一行（最小数据），得出最小的数据写入新的文件，然后再从最小数据所在的文件中读取一行数据，反复执行，得出所有排好序的数据

  



最右

- 用户中台的业务背景，技术上的挑战是什么，是怎么处理这些问题的
- 合同表拆分片，如何拆的
- 分片键是选择的
- 为什么要拆分片？1000万的数据量并不大
- 拆完分片后的收益是什么？
- 业务监控系统 做了什么？
- 提交审批流，审批流应该能够判断出来是否配置了审核人吧，直接repense 返回不行吗？
  - 这只是一种场景，可能还有没配置模版下发合同失败的，下发费用失败的等等

- 介绍下ddd
- 通用审核平台 是怎么做的？
  1. 原ES索引A，新增一个ES索引B，迁移数据时，同一类型、门店下审核完结的审核单只保留一条 （开启双写）
     - 存量数据：写脚本迁移
     - 增量数据：审核单完成或者驳回发的mq 自产自消，查当前门店下历史的审核单，只保留当前条，其他数据迁移到新ES 索引中
  2. 开始数据的全量对比
  3. 页面区分 归档库和未归档库 （关闭双写）
  4. 无异常后，将旧ES索引中的数据清除，自产自消时，将旧ES库中的数据清除 
  5. 如果数据有异常的情况下，通过数据库中的数据，将所有数据进行补偿
- 讲一下日常 遇到的索引优化
- redis的优点
- redis 的Recator 模式了解吗
- redis 中IO多路复用用的哪种方式
- epoll 为什么更快
- epoll 中 et 和lt的区别
- redis 用的哪种 ？
- 一个背包问题，选择不同的硬币数组，组合成指定数额的最少硬币数



美团

- volatile关键字 讲一下
- volatile 修饰的 i，两个线程i++，可以得到想要的值吗
- 如果我要得到的想要的值，我有什么方法？
  - 加锁、或者CAS
- 讲一下CAS
- atomic 的类型 了解过吗
- atomicInteger 的底层是怎么实现变更数据的呢
  - 用CAS 乐观锁实现
- Unsafe 类的底层看过吗？
- double a = 0; 加不加d可以吗
  - **整数常量**：默认类型为 `int`。
  - **浮点数常量**：默认类型为 `double`。
- double a = 1.1, float b = 1.1f, a 等于b吗 
  - 不等，因为float、double 截取的数字长度不同，二进制表示小数，截取的长度不一致，
    - 比较时，会隐性的float转换为double，但精度方面有缺失。float的指数位有效值有8位，而double的指数位有效值有11位
- 合同表拆分讲一下
- 讲一下你的业务
- 怎么配置模版
- 模版是怎么设计的
- 题：将链表的数据 1，,2，,3，,4，,5，,6 改成  1，,6，,2，,5，,3，,4



滴滴

- 讲一下合同表拆分片
  - 为什么要拆分片？而不是写一张新表，比如 合同24年表、 合同25年表
    - 按年份写表：
      - 适用于数据量小，实现简单，但是拓展性差，后续管理困难
      - 若查看当前门店的合同信息，需要查询所有年的合同信息，跨表查询复杂
    - 拆分片：
      - 支持并发访问拓展性强，
      - 合同续签场景下，同一类型的所有门店同时续签，所以在年初的写操作会特别多，拆分片后也能缓解写的压力
  - 分布式Id是怎么生成的？
    - Redis 或者数据库 设置起始值，需要生成时，每台机器预存50个
    - 雪花算法
  - 预存Id的为啥是单调递增的呢，它应该不是单调递增的吧
    - 趋势递增，并不是单调递增。
  - 为什么不用雪花算法，而是用预存的方式呢？
    - 避免了时间回拨的问题
  - 一般使用ID预取ID是为了提高系统性能，但从当前场景来看，为什么用这种方式呢？而不是 采用 不预存，每次取从redis中取呢
    - 年初续签合同场景比较多
  - 怎么进行数据对比的？
    - 实时流量回放
    - 全表遍历 对比字段
  
- 业务监控系统 是怎么做的？
  - 整体思路是怎样的？
    - 业务异常分为两个方面：
      - 先于业务发现异常，此时数据还没有异常
        - **分析某些场景容易会出现异常，可以设置数据漏斗，特定监控某个场景，针对卡点的场景进行重点关注**，比如说长时间不审核，可以进行催审
        - 我们也有在大数据平台建设数据漏斗，监控各个节点的数量
      - 数据已经异常
        - 先于用户知道业务异常，一定会体现在数据上。
        - 所以我们接binlog消息来分析
        - 避免频繁变更数据导致校验重复的问题，需要带上版本号，取最终稳定的数据

- 通用审核的数据迁移的工作，是怎么选型的（为什么要迁到这个库里），是怎么设计的
  - 冷、热库都是ES，因为都需要支持复杂查询
  - 调用量不高的情况下，一个索引可以支撑吧，不需要进行冷热数据分离
  - 1.3亿条数据并不多，为什么查询会很慢？
  
- 求一个数组中，两两相加 = k的组合数，不能重复使用

- select c from table where b = xx, 如何建立索引

- sql 查询条件 每个字段的顺序

- 讲一下分布式锁
  - 为什么分布式锁的解锁时，需要校验 Value值
  
  



字节

- 你的主要工作
- 业务监控异常是什么
- 状态停留 是怎么做的
- jmq的延时队列是咋么实现的？
  - 发送消息携带时间戳，消费者拉取消息时判断是否延迟到期
  - 延迟队列：将消息插入到数据库，定时任务定时扫描，将到期的任务发mq消费
  - 时间轮：RocketMQ 实现方式，设置多个不同时间区间的数组，定时任务扫描数组，执行到期任务，未到期的任务重新计算时间轮位置
  - 死信队列：RabbitMQ 消息队列可设置过期时间，消费死信队列
- ddd是怎么做的
- ddd的分层是怎么做的，有什么经验吗？
- 现有数据模型还是领域模型？数据模型是解决什么问题？
  - 现有领域模型，避免 数据库表设计直接驱动业务逻辑
  - 数据模型解决是解决持久化和查询
    - 数据模型为性能优化牺牲业务语义，会增加冗余字段方便查询
- 为什么领域模型和数据模型不保持一致呢？
  - 规则配置：领域模型 将新增字段平铺，数据模型将数据聚合在map中，新增冗余的查询字段
- ddd 的缺点有哪些？
  - 实现很简单的功能，很觉得有些繁琐
- 你们的ddd系统 有做什么优化吗？
  - rpc层冗余
- 为什么要对合同表进行拆分片
- 分布式Id是怎么生成的？
  - 预存id
- 分布式ID存在数据库中，数据库挂了，怎么办，如何做容灾处理
  - 客户端缓存本地号段，数据库不可用时降级使用缓存号段的增量。可以将原来预存的ID加一个大数，加入原来id是1百万，数据库挂了后，可以设置为1百万+10万，作为备用的ID，在数据库崩溃恢复后，可更新回去。
    - 缺点：若备用ID也用完后，则无法再次使用
- redis 如何与数据库保持一致的？
- 如何保证消息不丢失？
- Mq如何选主？
- 通用审核是怎么做的？
- 通用审核如何评估提效30%？
- 怎么迁移通用审核的数据的？
- 数据库的可重复读是如何实现的
  - mvcc

- 删除链表中倒数第N个节点



快手

- 讲一下合同拆分片
- 合同表数据量的增长率是多少
- 分布式id是怎么做的
- 有其他实现方式吗，雪花算法
- 雪花算法和预存ID的区别，选型是怎么考虑的，为什么要考虑预存ID
- 什么场景必须用雪花？订单id 用雪花，为什么呢
- 有什么业务场景是必须用雪花算法不能用预存ID的方式
  - 日志的traceId 
  - 秒杀系统生成ID
  - 消息队列的消息Id
- 业务监控系统讲一下
  - 监控的指标是什么，阈值是什么？
- 有异常会立马补偿吗？
- 有哪些异常呢？
- 状态停留是怎么实现的？
- 从提交审核到审核完成 多长时间？
- 如果做精细化的监控呢，比如说哪些单子一天内就审核完，哪些单子需要五天？
  - 如何实时监控？
  - 如果评估审核单的tp99，如果是实时得出呢，怎么解决？
  - 对时间进行区分，可以一天发一次消息，消费后，如果还在审核中，再发一个1天的延迟消息
- ddd 的理解
  - 规则配置：
- 三个线程循环打印a,b,c
- 如何实现无序消息的有序性？
  - 存在redis中，用zset存储，可以将zset进行水平拆分
  - 定时任务 从zset取数据时，需要加锁，取出目标的id，再消费



美团

- 三数之和

- 合同拆分片

  - 双写，写新写成功，写旧写失败的情况下，怎么解决？

    - 可以先写旧，后写新，确保旧的没有问题，如果有写失败，可以将将读改成读旧表
    - 失败后可以标记，后面进行重试

  - 存量的数据迁移是怎样的？ 滚动查询再遍历迁移

    - 京东没有相应迁移的中间件吗？大数据推数不也行吗
    - 你们的方案选型是怎么做的，为什么选择滚动查询？这种手段特别原始
    - 你们迁移了多久？1000万的数据不大，单表也能够支持，为什么要拆分片
      - 门店有多少400万，1000万的合同数据，即使递增，也就是1000万加上所有门店数据，也不是特别多吧，为什么还进行拆分片
        - 答：年初的时候写操作比较多，另外这是我们自己挖掘的技改点，我们的期望是一次拆分，一段时间内部再考虑存储的问题，而且拆分片对京东来说特别常用的一种手段
      - 只迁移了门店没有迁移合同信息？那用户怎么查看自己的合同信息，这有点说不通
        - 迁移过来的门店是为了进行采购，并不会查看合同信息，如果查看合同，可以在原系统查看

  - 你觉得还能体现你能力的还有哪些？

    - 业务监控系统，发现了业务异常怎么处理？
    - 是产品问题多，还是系统问题多？

  - 讲一下用户中台的核心的模块

    

贝壳

- 具体做的业务
- 在工作期间做过哪些大型的项目





小红书

- 当前应用几个人开发
- 讲一下你最熟悉的部分吧
- 拆分片
  - 怎么双写的，直接写的吗？为什么不直接用binlog 做数据同步呢
    - 没答好，
  - 分片键有哪些
  - 数据对比怎么对比呢，对比用了多久？ 
    - 一天，边迁移边对比
  - 流量回放是怎么用的
  - 假设流量回放发现发现有1%的数据不一致怎么解决
  - 怎么切流
  - 日常的查询的qps有多大
    - 几百吧
    - 
- 数据库与ES怎么保证一致呢



高德

- 合同拆分片，为什么不拆垂直拆表呢，把基础字段拆到另外一张表？提高它的相应能力，是不是有大key
  - 合同表字段并不多，合同表是后面数据量会增加，而不是单条记录查询有性能问题
- 历史合同 不是高频繁读取的，为什么不把合同表改成冷热数据呢？ 已经签署的历史合同设置成冷数据，为什么没这样考虑呢？
  - 增加了用户查询的复杂性
- ddd 的原则、想法、经验
  - 领域模型是如何关联的？
    - 有些模型是聚合的，有些是不同模型，有他们的映射关系
  - 你刚才提到的内容，好像和ddd没有太大的关系
  - 领域模型和数据模型 不一致的情况
    - 怎么解决，如果表结构发生了变更，领域模型不变，如何解决
    - 
- 垃圾回收时怎么样的
- redis的持久化讲一下
- 电商的商品了解吗，sku、spu
- 不同字符的字符串最长长度





项目：

合同表单分片拆分

- 步骤
  1. 上线开启双写，迁移增量数据，仍读旧表
     1. 需说明，原单表Id是数据库自增的，后面改成分布式Id
  2. 滚动查询，迁移增量数据
  3. 数据对比，实时流量回放
  4. 无异常则切读，读新库，仍保持双写
     1. 切读需灰度切读，不能全部放量
  5. 仍无异常时，切写，只写新表，不写旧表





百度

- 项目：1000万的数据为什么要进行拆库拆表？单数据库可以支撑？没答好
  - 我们的数据库写操作压力大，我们有做很多治理，比如说将一些复杂查询迁移到ES、查询查从库、我们本来使用的多主多从的集群，原来只使用了单主的表，所以这也是治理的一项内容
    - CPU利用率高 持续超过60%
  - 
- 分布式ID 预存ID，50wqps过来，这种方式的id 会不会有性能卡点
  - 会有性能卡点，但我们可以选择其他的方式，比如雪花
- 有一张表 联合索引的主键，在insert数据时，平均是几百ms，偶尔会有5,6的时间才能完成，怎么排查这个问题？只执行insert操作时，CPU飙升，执行完CPU就降下来了
  - 数据库压力大、其他写操作加锁导致、
  - 联合索引的无序插入导致频繁页分裂，加上高并发时的锁竞争，共同引发 “偶尔慢” 和 “CPU 飙升”。
- 有一个读接口 20w qps，写接口操作比较少，10亿数据，查询时，怎么保证接口的响应时间
  - 用户请求 → 本地缓存（10 万 QPS，微秒级）→ 分布式缓存（9.8 万 QPS，毫秒级）→ 数据库从库（2000 QPS，毫秒级）

- 如果写操作执行完后，立马反查，如何保证两个集群的数据是一致的？redis 有两个地方的集群
  - 主动写redis集群，特么的，我还以为已经是主动写redis集群了。
  - 解决方式：写库前，先发mq更新redis，等redis更新完成后，再更新数据库
- 有个接口，每次请求都会Full GC，分析下原因
  - 有大对象老年代空间不足、手动调用system.gc、空间担保失败
- 经调查是有大对象，怎么解决
  - 将大对象拆分成小对象、调整新生代、老年代的比例、将构建对象拆分成多个方法，让它方法不要执行太久
- 给定一个单向链表，从中位数开始，先右后左打印val值

真应该怼这个面试官，描述场景并没有描述完它的背景。谁知道他们redis两个集群是通过rdb文件同步的，而不是主动更新的。

百度

- equals 和 == 的区别
- Volatile讲一下
- ThreadLocal 讲一下
- static修饰的区别
- Integer 和int的区别
- int 是几位的，是大端模式还是小端模式 （小端，C语言的内容）
- AQS讲一下
- 实现方法有哪些 countdownLaunch 用的AQS
- 分布式锁
- 分布式锁怎么实现公平锁和非公平锁？
- redis 上锁的命令 
- String的底层数据类型
- zset的数据结构是什么
- 了解过listpark吗，redis 6.0以后得实现方式替换了ziplist
- 压缩列表的查询复杂度、跳表的呢
- 跳表的默认层级是多少
- 算法：最大1的连续个数 III
- like 查询 %name， 这种查询条件怎么优化
- 数据库的主从同步
- insert的全链路
- 检验用户的写权限是在哪个环节
- innodb 处理B+树还有其他索引吗
- innodb会有默认主键吗？
- 页的大小是多大
- 虚拟内存讲一下
- 虚拟地址与物理地址怎么转换
- 多级页表是几层
- TCP 与UDP的区别
- 拥塞控制



滴滴

- 讲一下 拆分片的目标是什么？

  - 为什么要拆分片？
  - 拆分片的目标是怎么样的？提高合同表的性能，写性能和查性能（100ms 到20ms）
  - 具体是什么样的情况让你觉得你要通过拆分片来解决性能问题？(我讲的慢查询，不要说慢查询，讲未来预期和数据库分片性能差)
    - 合同表每年递增，若未来数据量预计增长到亿级甚至更高，单机数据库（或单表）的垂直扩展（如升级 CPU/内存/磁盘）成本高且存在上限。
    - 对合同表拆分片时，需要确认以下问题：
      - **监控指标分析**：检查 CPU、内存、磁盘 I/O、锁等待等指标，确认性能瓶颈是否由合同表引发。
      - **慢查询分析**：通过数据库日志或监控工具，定位高频慢查询是否与合同表相关。
      - **索引优化**：确认现有索引是否合理，覆盖查询需求。
      - **归档历史数据**：若旧合同访问频率低，可先尝试归档冷数据（如将 3 年前的合同迁移到历史库）。
      - **分区表（Partitioning）**：尝试使用数据库内置的分区功能（如按年分区），观察性能改善情况。
  - 

- 数据库的默认id为什么是自增的，而不是随机生成的数字呢？

- 写一个对接口限流的方法，要求1h内限制100次，第101次return false，不考虑并发的情况

- 反问：你对这个岗位最看重的点有哪些




阿里国际

- 目前做的业务

- 怎么保证系统的高可用和高性能

  - 话题太大了

  - 

    # 怎么保证系统的高可用和高性能

    要保证系统的高可用性（High Availability, HA）和高性能（High Performance），需要从架构设计、技术选型、运维监控等多个维度进行综合优化。以下是关键策略和实践方法：

    ---

    ### **一、高可用性（High Availability）保障**

    #### 1. **冗余设计（Redundancy）**

       - **多副本部署**：关键服务/数据至少部署 **3 个副本**（如 Kubernetes 的 Pod 副本、数据库主从复制）。
       - **跨可用区（AZ）容灾**：在云环境中将节点分布到不同可用区，避免单点故障。
       - **示例**：MySQL 主从同步 + Redis Cluster 多分片。

    #### 2. **故障自动恢复**

       - **健康检查（Health Check）**：通过心跳检测（如 HTTP `/health` 端点）实时监控服务状态。
       - **自动故障转移（Failover）**：
         - 数据库：主库宕机时从库自动提升为主（如 Redis Sentinel、MySQL MGR）。
         - 服务层：Kubernetes 自动重启崩溃的容器。

    #### 3. **负载均衡（Load Balancing）**

       - **流量分发**：使用 Nginx、HAProxy 或云厂商的 LB（如 AWS ALB）均衡请求。
       - **会话保持（Session Affinity）**：对有状态服务（如用户登录）保持请求路由到同一后端。

    #### 4. **优雅降级（Degradation）**

       - **熔断机制**：通过 Hystrix/Sentinel 在依赖服务故障时快速失败，避免级联雪崩。
       - **兜底策略**：核心功能不可用时返回缓存数据或静态页（如商品详情页降级为静态信息）。

    #### 5. **数据持久性与一致性**

       - **持久化存储**：确保数据写入磁盘（如 Kafka 的 `acks=all`、MySQL 的 `sync_binlog=1`）。
       - **分布式一致性协议**：使用 Raft/Paxos 算法（如 Etcd、Consul）保证数据一致性。

    ---

    ### **二、高性能（High Performance）优化**

    #### 1. **架构层面**

       - **异步化设计**：
         - 非阻塞 I/O：Netty、Node.js 处理高并发连接。
         - 消息队列：用 Kafka/RabbitMQ 解耦耗时操作（如订单支付后的通知逻辑）。
       - **缓存策略**：
         - 多级缓存：本地缓存（Caffeine） + 分布式缓存（Redis）。
         - 缓存预热：高峰前提前加载热点数据。

    #### 2. **代码层面**

       - **减少锁竞争**：
         - 无锁数据结构（如 Disruptor 环形队列）。
         - 细粒度锁（如 ConcurrentHashMap 的分段锁）。
       - **高效算法**：选择时间复杂度更优的算法（如排序用 TimSort 代替冒泡排序）。

    #### 3. **数据库优化**

       - **索引设计**：为高频查询字段添加索引（避免全表扫描）。
       - **读写分离**：主库写，从库读（如 MySQL 主从 + MyCat 分片）。
       - **分库分表**：按用户 ID 或时间分片（如 ShardingSphere）。

    #### 4. **网络与硬件**

       - **CDN 加速**：静态资源（图片/JS/CSS）分发到边缘节点。
       - **硬件升级**：SSD 替代 HDD、万兆网卡。

    ---

    ### **三、监控与持续改进**

    #### 1. **全链路监控**

       - **指标采集**：Prometheus 监控 CPU/内存/QPS。
       - **日志分析**：ELK（Elasticsearch+Logstash+Kibana）聚合日志。
       - **链路追踪**：Skywalking/Jaeger 跟踪请求链路。

    #### 2. **压测与调优**

       - **基准测试**：用 JMeter 模拟高并发场景。
       - **瓶颈分析**：通过 Arthas 诊断慢方法，用火焰图定位 CPU 热点。

    #### 3. **自动化运维**

       - **CI/CD 流水线**：自动化构建、测试、部署（如 Jenkins + GitLab CI）。
       - **弹性伸缩**：基于 CPU/自定义指标自动扩缩容（如 K8s HPA）。

    ---

    ### **四、典型技术栈组合**

    | 目标             | 可选技术方案                                  |
    | ---------------- | --------------------------------------------- |
    | **负载均衡**     | Nginx、AWS ALB、LVS                           |
    | **服务容错**     | Sentinel、Hystrix、Resilience4j               |
    | **缓存**         | Redis（分布式）、Caffeine（本地）             |
    | **消息队列**     | Kafka（高吞吐）、RabbitMQ（低延迟）           |
    | **数据库高可用** | MySQL MGR、Redis Cluster、MongoDB Replica Set |
    | **监控告警**     | Prometheus + Grafana、Datadog                 |

    ---

    ### **五、案例：电商系统的高可用与高性能设计**

    1. **前端**：
       - CDN 加速静态资源，Nginx 反向代理 + 缓存。
    2. **网关层**：
       - Spring Cloud Gateway 限流 + 熔断，请求路由到不同微服务。
    3. **服务层**：
       - 订单服务无状态化，Kubernetes 自动扩缩容。
       - 支付服务异步化（MQ 保证最终一致性）。
    4. **数据层**：
       - MySQL 主从同步 + 分库分表，Redis 集群缓存热点数据。
    5. **监控**：
       - Prometheus 采集指标，ELK 分析错误日志。

    ---

    ### **总结**

    - **高可用 = 冗余 + 自动故障转移 + 优雅降级**  
    - **高性能 = 异步化 + 缓存 + 无锁设计 + 数据库优化**  
    - **持续保障 = 监控 + 压测 + 自动化**  

    通过分层设计和合理的技术选型，可在成本与效果之间取得平衡，实现 SLA 99.99% 以上的高可用和高性能系统。

- 讲一下倒排索引：
- 哪些场景会用到ES
  - 复杂条件查询、聚合查询
  - 全文搜索
  - 日志管理和分析
  - 处理带时间戳的高频数据
- 讲一下聚簇索引和非聚簇索引的区别
  - 存储方式：聚簇索引叶子节点存储真实数据，占用空间大，非聚簇索引只存储Id，占用空间下，需要回表操作。
  - 索引数据量限制：聚餐索引默认会建一个，根据主键Id创建，非聚簇索引可以建多个
  - 查询速度：按主键查询，查聚簇索引快，如果是查询条件命中非聚簇索引，则需要回表
  - 性能：聚簇索引写入性能差，非聚簇索引写入性能好
- 有jvm调优经验吗
  - 



字节

- 业务监控异常 的难点
- 业务监控异常的收益是什么
  - 减少工单，存在业务异常和系统异常，掩盖的情况，后续可能会造成损失
  - 每天的工单量是多少
    - 十几条
  - 业务监控系统做了多久？用了大量时间来解决工单问题是不是不合理？
    - 一方面有作为指标评估可用性，一方面是为了提供用户体验
- 数据迁移
- 讲一下分布式事务
- A向B转账 怎么用分布式事务
  - 假设调用接口超时了
- 合并多个有序队列



高德

- 讲一下项目
- IO多路复用 的poll 和epol的区别
- 栈溢出的异常有哪些方式可能出现
- 本地缓存 coffine底层了解过吗 没有
- 算法题



贝壳

- 讲一下你熟悉的业务
- 讲一下业务监控系统
- 怎么区分bff层与中台服务有争议吗，怎么解决的
- 为什么走呢





洋钱罐

- 业务监控系统
  - 监听了哪些的binlog消息
  - 业务监控系统的难点是什么
    - 怎么做成通用性的能力
    - 怎么识别出这些业务痛点
      - 线上问题
      - 设置数据漏斗，针对某些容易卡点的内容进行特定的校验
    - 发现异常后，谁看，谁处理呢
  - 接Kafka的消息吗，与jmq的区别？有什么特点呢
  - kafak如何保证消息的有序呢
  - **主从复制延迟的场景有哪些**
    - 主从服务器配置不对称
      - 主库固态硬盘，从库机械硬盘，或者主库32核，从库4核机器 都可能会出现这个问题
    - **批量的更新操作**
    - **大事务**：大表的增加、删除字段、或者加索引等操作
    - 库的读请求负载过高
    - 高并发的短事务过多，或者大事务
- 通用审核平台
  - ES查询慢吗，1亿条数据
  - ES的索引是怎设计的
  - 冷热数据还可以怎么优化
    - 按年进行拆分冷热数据
- 数据库和ES的区别
  - 数据库和ES数据怎么保持一致？
- 实现一个栈，三个方法 pop、push、getMin 要求三个方法的时间复杂度都是O(1)



滴滴

- 合同表拆分片
  - 为什么1000万的数据要进行拆表，数据量并不大
    - 历史因素：数据库开始数据量小，加索引CPU100%，为了避免这种问题，我们进行了读写分离，然后又出现了读从库是旧数据的问题，所以我们现在在做读主写主，并且将一些数据量稍大的表进行拆分片
    - 合同表增量快
  - 还有优化空间吗？
  - 有什么性能提升吗
- 还有从吗，还用吗？
  - 不用了
- 业务监控系统
  - jmq和现有的消息队列 有什么特点吗
  - 为什么接到binlog消息后，还要转发呢，直接处理可以吗？
  - 出现了异常后，try catch异常可以吗，不转发另外的消息队列可以吗，是不是存在过度设计
    - 我当前直接承认了，后面需要直接否认，不存在过度设计。有些场景下，是只有变更一次的异常清开那个，如果catch的话，可能会漏掉。而且业务监控不准确也是我们不希望看到的
- synchronized讲一下
  - 是什么；保证了三大特性。原子性、可见性、有序性；实现原理；锁的优化
- OOM异常怎么排查
  - OOM异常的情况，异常时，会有打印日志，显示 java 
    - java堆OOM：java.lang.OutOfMemoryError: Java heap space 常见，
    - 元空间OOM：java.lang.OutOfMemoryError: Metaspace 加载的类太多
    - 直接内存OOM：java.lang.OutOfMemoryError: Direct buffer memory  NIO操作太多
    - 操作系统OOM：java.lang.OutOfMemoryError: unable to create new native thread 线程创建过多或系统内存不足
  - 一般异常情况是java堆OOM，可能情况
    -  内存泄漏
    - 缓存使用不当
    - 数据量超出预期
  - 元空间OOM 可能情况
    - 动态生成大量类(如CGlib代理)
  - java堆OOM 排查流程
    - 导出堆内存文件 
      - 手动导出：jmap -dump 导出堆内存文件
      - 自动写入: jvm参数，新增 -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/path/to/dump.hprof
    - 使用MAT分析heap dump文件：
      1. 打开MAT并加载dump文件
      2. 查看"Leak Suspects"报告
      3. 分析大对象保留链
      4. 重点关注：
         - 占用内存最大的对象
         - 对象增长趋势
         - GC Roots引用链
- 哪些场景用到了redis，怎么保证一致的，如果写数据库成功了，写redis失败了呢
- 有强一致性的场景吗？
  - 如果是强一致的话，我们会主动同步更新redis和ES
- http和https的区别
- 算法：实现256位大数的加减操作
- 算法：合并两个有序数据组





作业帮

- redis的使用场景
- redis有设置过期时间吗
- 分布式锁怎么设计的
- Mysql explain 会输出哪些关键信息
- 聚簇索引和非聚簇索引的区别
- 算法：找到N的平方跟
- 算法：



爱奇艺

- 合同拆分片
- jmq的性能和kafak的区别
- kafak为什么快
- 零拷贝讲一下
- 其他中间件用的哪种零拷贝
- 顺序mq是怎么做到的
- Kafak 消费失败了如何处理，jmq呢
- 线程池的参数
- 核心线程数是怎么设置的
  - 说反了，CPU密集型 线程核数=CPU核数+1
  - IO密集型 = CPU核数 * 2 + 2
- 线程池能否支持动态调整线程数，怎么实现的？
  - 
- threadLocal 讲一下
- 内存泄漏不是最严重的问题吧，还有其他可能严重的问题吗
- 索引优化
- explain 讲一下
- type 类型有哪些
  - 
- 数据库默认的数据隔离级别
  - **可重复读**，又说错了，说成了读已提交
- MVCC讲一下
- ddd领域模型 贫血模式和充血模型
- 怎么划分领域模型
- 聚合根的概念
- jvm优化有哪些
  - 堆的最大值和最小值相等，避免扩容
  - 新生代和老年代的比例
    - 原则是：在尽量减少fullGC的情况下，增加新生代的空间大小，需要给老年代预留出 1/3的空闲空间
  - survivor区和Eden区的比例设置
    - 如果是临时数据比较多，则增加Eden区的大小
    - 如果长期对象比较多，则减少Eden区的比例，让它晋升到老年代
  - 垃圾回收器
    - 单核使用串行垃圾回收器
    - 多核：如果关注吞吐量，则选择 吞吐量优先垃圾回收器；如果关注低停顿时间，则选择 CMS和G1
  - 调整full GC触发的时机
    - CMS、G1 垃圾回收器 进行full GC时，可能会有浮动垃圾，需要预留一部分内存空间容纳新产生的浮动垃圾，因此尽量提前触发GC
  - 老年代频繁GC，且每次回收内存很多
    - 调整新生代老年代晋升的年龄和指定大对象放入老年代的大小，避免只访问一次的大对象放入老年代
- G1和CMS的区别
- G1的大对象放哪
- ZGC讲一下
- 新的JDK版本，jdk大的变动有哪些
- AI一般都怎么用呢



阿里夸克

- 合同拆分片讲一下
  - 为什么要拆分片
  - 拆分片Id 是怎么设置的
  - 有数据倾斜吗
- 业务监控系统讲一下
- JDK 8之后的有哪些功能
- 讲一下G1 
- G1大对象放哪
- 设计模式有用到哪些
  - 
- Spring 用哪种模式创建对象呢
- Spring如何保证对象是单实例的呢？
- 单例实现 有哪些考虑呢
- 反序列化会创建新对象，怎么解决呢？
- 员工工号、姓名、身份证号、入职时间的表，怎么设计索引
  - 设计联合索引
  - 身份证号 的字段类型是哪种、员工工号呢
  - bigint(3) 3代表什么意思
    - 即使定义为 `bigint(3)`，仍可以存储 `123456789` 这样的大数
- 主键索引和非主键索引的区别
- 为什么不用身份证号 使用 bigint类型呢  身份证号有 x字符
- 



转转

- 业务监控系统
- 合同拆分片
- 通用审核平台 冷热数据分离
- 领域驱动设计 是怎么划分领域的
- sql优化思路 explain 分析sql 有哪些指标
- type 类型 中的有哪些
- 有没有比Explain 更全的？ 
  - 不了解
- 更新操作的执行过程，记得说undo log 日志，redo log 日志
- undo log 日志的作用
- MVCC
- redis 的基本数据类型有哪些
- redis zset 的底层 
- redis 持久化机制
- redis  看门狗机制 详细讲一下
  - 
- 线程池 的核心参数
- jdk 阻塞队列有哪些？
- synchronized 加锁的场景
- volatile 关键字
- AQS 
- Spring中 事务失效的场景
- 事务传播机制 会导致事务失效吗？
  - 没答对
- mq如何保证消息不丢失
- 消息堆积如何处理
- Bean的初始化流程
- 循环依赖怎么解决？





爱奇艺

- 合同拆分片
- 分布式锁
- 分布式锁能保证完可用吗？
  - redis 宕机后可以使用红锁
- 红锁能保证 完全可用吗？
- jdk 新版本有哪些？有哪些功能
- hashCode 和equals 的关系
  - 重写需要两个都重写
  - 原则：hashCode相等 未必 equals 相等，但是equals 相同 hashCode必须相等
  - 只重写equals问题：相同对象在HashMap/HashSet中被重复存储	hashCode不同导致存储在不同桶
- 一个接口需要5s才能返回结果，两次调用 都是5s吗？
  - 涉及到线程池，可能还涉及到加锁等等。场景是不可确定的





Boss 

- 业务监控
  -  你觉得做的这个的业务价值是什么
  - 怎么做的状态停留
- 合同
  - 如何做到 有就更新 没有就插入的呢
  - 怎么做校验呢  
- 你们有读接口 涉及写操作的吗？
- 线上问题怎么解决呢
- 技术方面哪些比较深入呢 
  - mysql redis java并发锁 Spring 
- 查询慢怎么办，索引优化
- 假设 a，b，c 三个索引，实际a查询效果最好，但是sql执行时，选择了索引c 怎么分析和解决？
- ReentrantLock 中 Reentrant 是什么意思
  - "Reentrant"（可重入）是 ReentrantLock 的核心特性
- 你觉得哪的源码 比较有意思，讲一下
- Spring的IOC启动和Springboot的IOC启动的区别
- 三级缓存有了解吗
- 一级缓存和二级缓存可以合并吗？
  - 没答好
- 三级缓存是不是可以不存在？
- 最近学习了哪些东西方便介绍下吗
- ZGC的原理 （感觉面试官并不懂）
- 开源的中间件你知道多少？
- java中 公共的父类是什么
- object的方法有哪些
- 为什么要有hashCode，不直接用equals
- hashMap中为什么要用红黑树
- 那为什么不用平衡二叉树而不是红黑树呢
  - https://www.nowcoder.com/discuss/511554084093157376
  - 
- 红黑树的特性
- 最长路径 不超过 最短路径的两倍 这是为什么？





# 202509

白龙马

- 合同表拆分片

- 分布式ID是怎么设计的

- 讲一些原来做的业务

- 提交审核如何防重？

- CPU飙升怎么处理？

- 业务监控系统

- 数据变更比较快，mq比较多怎么处理？

  - 应该是想问我，怎么处理多mq的问题

- juc 包下常用的有哪些？

  - **简单同步** → `synchronized`
  - **复杂锁需求** → `ReentrantLock`
  - **资源控制** → `Semaphore`
  - **线程协调** → `CountDownLatch`/`CyclicBarrier`
  - **并发集合** → `ConcurrentHashMap`/`CopyOnWriteArrayList`
  - **异步任务** → `CompletableFuture`
  - **并行计算** → `Fork/Join`

- ReentrantLock怎么实现公平锁和非公平锁？

  - lock操作有两种实现，公平锁实现和非公平锁实现。

- 线程池讲一下

- 线程池核心线程数、最大线程数怎么确定？

- 为什么使用线程池？

  - 降级创建线程的资源消耗、并发执行提高响应速度、方便对线程的管理

- 循环打印a，b，c有几种实现方案

  ​	https://www.doubao.com/thread/we2c58ba3df90a29d

  - `synchronized`+valeite
  - `ReentrantLock` + `Condition`
  - `Semaphore`
  - `Thread.join()`

- redis 分布式锁

- redis锁过期了怎么办？

- redis 怎么保证数据库的一致性？

  - 区分强一致性还是弱一致性性：强一致性都是先操作数据库后删缓存，可以使用延时双删。弱一致性则发mq或者接binglog消息删除

- **数据库的死锁遇到过吗？**

  - 四个必要条件：互斥、占有并等待、非抢占、循环依赖

- 数据库hash索引跟b+树的优缺点

- 联合索引 a、b、c 构建索引

- 设计一个延时队列？

- Kafka 扩缩容的平衡？

- jvm的垃圾回收方法



易点云

- 合同表拆分片
- HashMap和HashTable的区别
- #{} 和${}的区别  
  - ${} 是进行文本替换 ，#{}是先设置为？占位符，通过PreparedStatement讲呢CAS设置，防止sql注入
- currentHashMap的优势
- 讲一下反射
- java的内存模型
- 什么时候会触发full GC
- Full GC 会回收哪些区域，元空间会回收吗
- 慢sql优化怎么分析处理
- Kafka的副本讲一下
- Kafka的数据积压怎么处理



面壁智能

- 讲一下你做的业务
- 业务监控是怎么做的
- 突发流量怎么排查？
- ddd讲一下
- 合同表拆分片
- ES的mapping是怎么做的？每个字段都是字段

- ES深度分页怎么做的

  - 滚动查询
  - scroll 查询 查询快照

- mybatis #和$的区别，用户可选排序条件时，怎么写sql

- 事务的隔离级别：读未提交、读已提交、可重复读、串行化

- 间隙锁

- 间隙锁的隔离级别

- 讲网关

- 

- 反转链表

  

面壁智能

- 合同表拆分片
- 收益是什么？查询性能和系统稳定性
- 拆分片是否有不平衡的情况
- 是否有版本管理
- 如果写多个分片，该怎么处理？
- 大流量的写和查，该怎么设置合同系统，怎么保证实时性，把系统分几层，存储分几层，可能遇到的业务问题怎么做优化，数据丢失后如何恢复
  - 感觉没答太好
- CurrentHashMap的源码设计
- CurrentHashMap 怎么扩容？
- string 计算一个加减乘除的 "15+2*2*3-8/2"



易点云

- 技术设计最重要的三件事是什么，答得不好
  - 清晰的架构和抽象
  - 可靠的数据设计和模型
  - 对可变性的考量（可拓展、可维护、灵活性）
- 你认为最重要的是哪一点？
- 审核平台数据迁移怎么做的
- 数据库怎么同步ES？假设数据有变更后呢
- 如果写数据库成功，写es失败了怎么办？
  - 放在同一个事务里，失败后回滚
- 回滚后，跑异常出去，返回用户请求失败？
  - 是的，难道不应该吗。面试官的意思是想问你要怎么补偿，而不是实际实现
- 写ES失败，返回请求异常这合理吗？



转转

- 合同拆分片
- 线程池的执行过程
- 核心线程和救急线程 回收的时候需要区分是哪一类线程吗
- 怎么实现订单超时自动关单的能力？
- 延时队列怎么设计
- 京东消息队列是哪种消息队列？
- MQ会可能会有重复吗？
- 定时系统怎么设计？
  - 定时任务扫库，执行对应的命令
- 并发问题怎么解决？
  - 加分布式锁
- 分布式锁有什么应用场景？
- sql调优





易点云

- 



海港科技

- 通用审核
- 业务监控异常
- 合同拆分片
- 介绍业务
- 讲一下ddd
- 延时消息
- 整体的系统架构是怎么样的
- 接口改造是怎么提高性能的
- 数据库的版本、创建索引的注意项
- Innodb的索引
- 讲一下sql优化
- 讲一下倒排索引



转转

- 合同拆分片
  - 最大的难点，没有经验独自完成
  - 怎么保证项目不出问题
    - 双写不出异常
    - 对比的方式
    - 业务监控兜底
  - 遇到过什么问题吗
- jd MQ的区别
- Kafka的rebalance
- 对你最大的成长
- 重新让你支援一次，你会做哪些动作保证顺利进行
- 你的未来3-5年的职业规划
- 你对哪块有兴趣
- 技术服务业务，你怎么理解
- 薪资
- 反问：





粉笔上岸

- 进程和线程的区别
- 并发的工具类用哪些 
  - 锁、原子类、volatile、currentHashMap
- 线程池参数
- 锁的概念
- reentlock锁 和 synchronized
- synchronized的优化
- 原子类
- 间隙锁可能出现的问题
  - 死锁
  - 间隙锁的副作用：事务A加[5,+1000000]加间隙锁，事务B插入
  - ~~影响不必要的数据：锁定记录 id=1,id=3，但是因为间隙锁把id=2的也锁定了~~
- 分布式锁的场景
  - 防重处理
  - 对共享资源的访问
- 分布式锁的原理
- 锁的过期时间是怎么考虑的
  - 查看执行动作的埋点，获取它的执行时间，峰值时间+1/3
- 序列化的场景
  - 持久化、网络传输（RPC、http），存储复杂对象时也会使用序列化
- IO的阻塞、异步的 （5种IO模型）
- 线程阻塞时
- 微服务使用的网络协议有哪些
- 一个请求到你服务器的请求链路？
- 为啥不做算法呢？
- 算法：将String转换成数字



白马出行

- 业务监控
  - 怎么评估应该监控哪些内容，你是怎么考虑和设计的，怎么梳理的
    - 业务历史经验、数据漏斗
  - 数据漏斗有哪些内容？
  - 如果你们应用要拆的话，你认为应该怎么拆
  - 假设你们某个领域流量起来了，会不会影响你其他领域？
- 部署了50台机器，偶发情况下，突然两台机器cpu飙升，分析下原因，流量无波动，物理机无问题
  - GC、大对象、死循环
    - 死锁不会导致CPU飙升
  - 排查方法：查日志、看GC情况和内存情况，jstack
- 什么情况下会导致线程阻塞
  - 加锁、线程生命周期方法导致的阻塞（sleep、yield、join）、IO阻塞、还有死锁
- synchronized和ReentrantLock使用时，线程的状态
- Kafka是怎么做消息同步的？
  - 忘说稀疏索引了
- Kafka的重平衡
- 合同拆分片
- 讲一下你做的比较大的需求



58同城

- 合同拆分片
- 个人设置页接口改造是怎么优化的？
- 1000万的数据，如何取出其中最大的100个数
- mq如何保证消息不丢失



易宝支付

- 线程池的使用场景？
  - 业务流程中异步编排
  - RPC调用
  - MQ、Tomcat
- **RPC调用 consumer为什么使用线程池**
  - tm的，跟我胡扯，分为IO线程池（发送请求和处理响应，这个是必须的）和业务线程池，这个非必需
- 创建线程池，核心线程数会被立刻创建吗？
- 如何保证线程安全？
  - final修饰不可变、线程隔离、锁、CAS、使用安全容器、避免共享
- 乐观锁、悲观锁应该怎么选择



高德

- ddd 讲一下
- 为啥离开，做的哪块业务
- 你现在的系统，对你最大的挑战是什么
- 领域模型的怎么划分的、具体例子
- 原来的业务中：核心域、通用域和支撑域怎么划分
  - 核心域：商家、门店、入驻申请
  - 通用域：字段模板、流程模板
  - 支撑域：费用、合同
- 你们ddd应用的分层架构怎样的？
- 数据库什么量级需要分库分表？
- 数据库的事务怎么实现的？
- MVCC讲一下
- MySQL默认的隔离级别：可重复读
- 只有redo log日志，没有bin log日志有什么问题？
  - 听错了，听成redo log日志和undolog日志了
- bin log日志的格式
- 接bin log变更的mq，这个时候应该是哪种格式？
  - row格式的
- AQS是怎么样的一个结构，有哪些数据结构用到了AQS
- 用countDownLatch 业务中用过吗？
- CurrentHashMap，相对于HashTable、HashMap的核心优化点在哪里
  - 锁进行了细化，而且读操作无锁
- CurrentHashMap扩容时，读操作会有问题吗
  - 不会，用volatile修饰了
- thread local是干嘛用的？
- redis用什么数据结构用的多
- zset的底层结构了解吗
- 你做的项目如何评价是好坏？
- 接口的可用率有要求吗？
- 从业务的角度，如何评价你们的系统好坏？
  - 新增场景的快速支持
  - 入驻效率
- 用过AI吗
- 树层序遍历





美团

- 为什么走，职级，原来离职的原因，你预期的职级

- 合同分片

- 京东的业务、小组、组内的业务

- 业务的逻辑架构

- 做的业务：

  - 描述产品级的配置化能力服务、入驻、费用、合同清退都可以配置化

- ddd讲一下好处

- 现在业务的关注的指标：接口耗时

- 页面可能一直变，你们有做些什么优化吗？

- ```sql
  table
  id   name
  1     “张三”
  2     “李四”
  3     "王五"
  
  两个事件并行
  时间1：事务A select * from table
  时间2：事务B insert (4,"肖六") commit;
  时间3：事务A update table set name ="all" where id > 0 commit;
  
  问题
  1.第一次查询能查找几条数据
  		时间1内
  2.数据库的name字段分别是什么
  3，是否发生了幻读
  
  ```

  - 第一次查询能查找几条数据 
    - 时间1查出3条
  - 数据库的name字段分别是什么
    - 四条记录name 都为all
    - 为什么四条记录都修改了，时间2 事务已经提交了，所以时间3提交时会对复合条件的数据都修改
  - 是否发生了幻读
    - **发生了幻读**
      - 是的，发生了幻读。幻读是指一个事务在后续操作中看到了之前未看到的新行。在事务A中，第一次查询只看到3条数据，但update操作却影响了4条数据（包括事务B新插入的行）。这表明事务A在update时发现了新行（id=4），这些行在第一次查询时并不存在，这符合幻读的定义。在可重复读隔离级别下，虽然读操作（select）基于快照不会看到新行，但写操作（update）会看到最新提交的数据，从而导致幻读。

- 数组第k大的元素

  - 快排有点忘了，没写出来我真是服了

- 反问

  - 



滴滴

- 合同拆分片

- 业务监控系统

- 通用审核平台

- 两个栈完成对一个队列

- 404和502是什么

- 报502怎么排查

- 常见的Linux命令

- 查询nginx日志文件中 报502的条数，怎么写Linux命令

  - ```bash
    grep -c '" 502 ' /var/log/nginx/access.log
    ```

- 查看磁盘、文件大小

  - stat命令

- redis的内存淘汰策略

- redis 惰性删除

- zset的底层数据结构

- 什么场景用到zset

  - 排行榜：热门搜索词、游戏积分排行榜
  - 历史记录：用户浏览历史（按时间排序）、用户消息记录

- rpc了解过吗，rpc框架提供了哪些能力

- MySQL锁的机制

- volatile和synchronized讲一下

- 算法：定和的最小子数组



滴滴

- 业务监控
- 合同拆分片
- redis的数据结构有哪些？
- 如何保证数据库与redis保持一致
  - 延迟双删：先删缓存、更新数据库、延迟一会、再删缓存
  - 可以先更新数据库、删除缓存、延迟一会，再删缓存吗、是的这样更好
- redis的内存策略
- 
- 三数之和



阿里云

- 介绍下你的业务
- 用户权限逻辑是怎么设计的
  - 和我的业务逻辑无关
- 游览器输入url链接会有哪些链路 （服务端视角）
- 为什么要有网关层、bff层、中台的架构
- 网关层对无效请求的拦截涉及哪些技术
- 用户访问的东西不存在，你如何拦截
  - 设置空对象、布隆过滤器
- 有没有其他的技术，布隆过滤器假设有删除某些数据，不能删除对应的bit位，有没有其他技术
- jvm的内存模型
- 设计一个方法，让执行该方法会触发fullGC
  - 执行system.GC 
  - 创建大对象
  - 创建多个小对象，循环创建（）
  - 加载类，方法区不足也会触发full GC
- 翻转二叉树
  - 递归、迭代、层序遍历 多种方式完成

